import{c as b,r as x,a as v,j as e,L as _,D as S,T as z,u as $,E as P,b as w,C as U}from"./index-BJzMLFnQ.js";import{A as C,I as D}from"./info-l6kzt_Y2.js";import{U as F}from"./users-B8q2V8xp.js";import{B as k}from"./bar-chart-3-L6eEeHJB.js";import{A as L}from"./alert-circle-BVRI1ANv.js";import{C as R}from"./check-circle-B_PdM_7q.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=b("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=b("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=b("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=b("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=b("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=b("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=b("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),V=({campaignId:c=null,customerId:m="demo-customer"})=>{const[s,n]=x.useState(null),[g,h]=x.useState(!0),[d,u]=x.useState("today"),[l,p]=x.useState(null);x.useEffect(()=>{i()},[c,m,d]);const i=async()=>{try{h(!0);const a=await v.budget.getSummary(m);n(a.data)}catch(a){console.error("Error fetching budget data:",a),p("Failed to load budget data"),n({totalBudget:1e4,totalSpent:7234.56,projectedSpend:9876.54,remainingBudget:2765.44,daysRemaining:15,pacingStatus:"on_track",campaigns:[{id:"camp_001",name:"Summer Sale 2024",budget:5e3,spent:3456.78,projectedSpend:4987.65,pacingStatus:"slightly_over"},{id:"camp_002",name:"Brand Awareness",budget:3e3,spent:2345.67,projectedSpend:2876.54,pacingStatus:"on_track"},{id:"camp_003",name:"Product Launch",budget:2e3,spent:1432.11,projectedSpend:2012.35,pacingStatus:"at_risk"}]})}finally{h(!1)}},y=a=>{switch(a){case"under_pacing":return"text-blue-600 bg-blue-50";case"on_track":return"text-green-600 bg-green-50";case"slightly_over":return"text-yellow-600 bg-yellow-50";case"at_risk":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},t=a=>{switch(a){case"under_pacing":return e.jsx(B,{size:16});case"on_track":return e.jsx(z,{size:16});case"slightly_over":return e.jsx(T,{size:16});case"at_risk":return e.jsx(C,{size:16});default:return e.jsx(D,{size:16})}},r=a=>{switch(a){case"under_pacing":return"Under Pacing";case"on_track":return"On Track";case"slightly_over":return"Slightly Over";case"at_risk":return"At Risk";default:return"Unknown"}},f=(a,o)=>!o||o===0?0:Math.min(a/o*100,100);if(g)return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(_,{className:"animate-spin text-gray-400",size:32})})});if(l)return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"mx-auto mb-4 text-red-500",size:48}),e.jsx("p",{className:"text-gray-600",children:l})]})});if(!s)return null;const N=f(s.totalSpent,s.totalBudget);return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(S,{className:"text-blue-600",size:24}),"Budget Pacing"]}),e.jsxs("select",{value:d,onChange:a=>u(a.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"all",children:"All Time"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Overall Budget Usage"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${y(s.pacingStatus)}`,children:[t(s.pacingStatus),r(s.pacingStatus)]})]}),e.jsxs("div",{className:"relative h-6 bg-gray-100 rounded-full overflow-hidden mb-2",children:[e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500",style:{width:`${N}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[N.toFixed(1),"%"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Spent"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.totalSpent.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Budget"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.totalBudget.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Projected"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",s.projectedSpend.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx(I,{className:"text-gray-400",size:16}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.daysRemaining," days remaining in billing period"]})]})]})]}),!c&&s.campaigns&&s.campaigns.length>0&&e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-medium mb-4",children:"Campaign Breakdown"}),e.jsx("div",{className:"space-y-4",children:s.campaigns.map(a=>{const o=f(a.spent,a.budget);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a.name}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${y(a.pacingStatus)}`,children:[t(a.pacingStatus),r(a.pacingStatus)]})]}),e.jsx("div",{className:"relative h-4 bg-gray-100 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-500 ${a.pacingStatus==="at_risk"?"bg-red-500":a.pacingStatus==="slightly_over"?"bg-yellow-500":a.pacingStatus==="on_track"?"bg-green-500":"bg-blue-500"}`,style:{width:`${o}%`}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["$",a.spent.toLocaleString()," / $",a.budget.toLocaleString()]}),e.jsxs("span",{className:"text-gray-500",children:["Projected: $",a.projectedSpend.toLocaleString()]})]})]},a.id)})})]}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:[e.jsxs("h3",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(D,{className:"text-blue-600",size:16}),"Recommendations"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.pacingStatus==="at_risk"&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-0.5",children:"•"}),e.jsx("span",{children:"Consider reducing bids or pausing low-performing keywords to control spending."})]}),s.pacingStatus==="under_pacing"&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-0.5",children:"•"}),e.jsx("span",{children:"You have budget available. Consider increasing bids or expanding targeting to maximize reach."})]}),s.pacingStatus==="on_track"&&e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"•"}),e.jsx("span",{children:"Your budget pacing looks good. Continue monitoring for any significant changes."})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500 mt-0.5",children:"•"}),e.jsx("span",{children:"Set up automated alerts to notify you when campaigns exceed 80% of their budget."})]})]})]})]})},j=({icon:c,label:m,value:s,change:n,format:g="number",loading:h})=>{const d=n>0,u=d?"text-green-600":"text-red-600",l=d?e.jsx(O,{size:16}):e.jsx(U,{size:16}),p=i=>{if(h||!i&&i!==0)return"---";switch(g){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(i);case"percent":return`${i.toFixed(2)}%`;case"number":return i>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(1)}K`:i.toFixed(0);default:return i}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(c,{className:"text-blue-600",size:24})}),n!==void 0&&n!==0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${u}`,children:[l,e.jsxs("span",{children:[Math.abs(n).toFixed(1),"%"]})]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:m}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p(s)})]})},W=({campaigns:c,loading:m})=>m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(_,{className:"animate-spin text-gray-400",size:32})}):!c||c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(k,{className:"mx-auto mb-4 text-gray-300",size:48}),e.jsx("p",{children:"No campaigns found"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-700",children:"Campaign"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"Impressions"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"Clicks"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"CTR"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"Conversions"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"Cost"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-700",children:"ROAS"})]})}),e.jsx("tbody",{children:c.map(s=>{var n,g,h,d,u,l,p,i,y,t,r;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.advertising_channel_type})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.status==="ENABLED"?"bg-green-100 text-green-700":s.status==="PAUSED"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[s.status==="ENABLED"&&e.jsx(R,{size:12}),s.status==="PAUSED"&&e.jsx(L,{size:12}),s.status]})}),e.jsx("td",{className:"py-3 px-4 text-right",children:((g=(n=s.metrics)==null?void 0:n.impressions)==null?void 0:g.toLocaleString())||"0"}),e.jsx("td",{className:"py-3 px-4 text-right",children:((d=(h=s.metrics)==null?void 0:h.clicks)==null?void 0:d.toLocaleString())||"0"}),e.jsx("td",{className:"py-3 px-4 text-right",children:(u=s.metrics)!=null&&u.clicks&&((l=s.metrics)!=null&&l.impressions)?`${(s.metrics.clicks/s.metrics.impressions*100).toFixed(2)}%`:"0%"}),e.jsx("td",{className:"py-3 px-4 text-right",children:((i=(p=s.metrics)==null?void 0:p.conversions)==null?void 0:i.toLocaleString())||"0"}),e.jsxs("td",{className:"py-3 px-4 text-right",children:["$",((((y=s.metrics)==null?void 0:y.cost_micros)||0)/1e6).toFixed(2)]}),e.jsx("td",{className:"py-3 px-4 text-right",children:e.jsx("span",{className:`font-medium ${(((t=s.metrics)==null?void 0:t.conversions)||0)>0?"text-green-600":"text-gray-500"}`,children:((r=s.metrics)==null?void 0:r.conversions)>0?`${(s.metrics.conversions*50/(s.metrics.cost_micros/1e6)).toFixed(2)}x`:"---"})})]},s.id)})})]})}),Z=({viewMode:c})=>{const{user:m}=$(),[s,n]=x.useState(!0),[g,h]=x.useState("7d"),[d,u]=x.useState(!1),[l,p]=x.useState({overview:null,campaigns:[],insights:[],trends:null}),i=async()=>{var r,f,N,a;try{n(!0);const[o,A]=await Promise.all([v.analytics.getDashboard(),v.campaigns.list()]);p({overview:((r=o.data)==null?void 0:r.overview)||{},campaigns:((f=A.data)==null?void 0:f.campaigns)||[],insights:((N=o.data)==null?void 0:N.insights)||[],trends:((a=o.data)==null?void 0:a.trends)||{}})}catch(o){console.error("Error fetching dashboard data:",o),p({overview:{impressions:0,clicks:0,ctr:0,cost:0,conversions:0,cpa:0,roas:0},campaigns:[],insights:[],trends:{}})}finally{n(!1)}},y=async()=>{u(!0),await i(),u(!1)};x.useEffect(()=>{i()},[g]),x.useEffect(()=>{const r=setInterval(()=>{i()},3e5);return()=>clearInterval(r)},[]);const{overview:t}=l;return e.jsxs("div",{className:"dashboard-view",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",(m==null?void 0:m.first_name)||"User","! Here's your campaign overview."]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:g,onChange:r=>h(r.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"1d",children:"Last 24 hours"}),e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"})]}),e.jsx("button",{onClick:y,disabled:d,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:e.jsx(H,{className:`${d?"animate-spin":""}`,size:20})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(j,{icon:P,label:"Impressions",value:t==null?void 0:t.impressions,change:12.5,loading:s}),e.jsx(j,{icon:w,label:"Clicks",value:t==null?void 0:t.clicks,change:8.3,loading:s}),e.jsx(j,{icon:S,label:"Total Spend",value:t==null?void 0:t.cost,change:-5.2,format:"currency",loading:s}),e.jsx(j,{icon:z,label:"ROAS",value:t==null?void 0:t.roas,change:15.7,format:"decimal",loading:s})]}),c!=="simple"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(j,{icon:M,label:"CTR",value:t==null?void 0:t.ctr,change:3.2,format:"percent",loading:s}),e.jsx(j,{icon:F,label:"Conversions",value:t==null?void 0:t.conversions,change:22.4,loading:s}),e.jsx(j,{icon:S,label:"CPA",value:t==null?void 0:t.cpa,change:-8.9,format:"currency",loading:s}),e.jsx(j,{icon:k,label:"Conv. Rate",value:(t==null?void 0:t.conversions)/(t==null?void 0:t.clicks)*100||0,change:5.6,format:"percent",loading:s})]}),l.insights.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"AI Insights & Recommendations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.insights.map((r,f)=>e.jsx("div",{className:`p-4 rounded-lg border ${r.type==="opportunity"?"bg-blue-50 border-blue-200":"bg-amber-50 border-amber-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.type==="opportunity"?"bg-blue-100":"bg-amber-100"}`,children:r.type==="opportunity"?e.jsx(E,{className:"text-blue-600",size:20}):e.jsx(L,{className:"text-amber-600",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600",children:r.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs",children:[e.jsxs("span",{className:`font-medium ${r.impact==="high"?"text-red-600":r.impact==="medium"?"text-amber-600":"text-green-600"}`,children:[r.impact.toUpperCase()," IMPACT"]}),e.jsxs("span",{className:"text-gray-500",children:[(r.confidence*100).toFixed(0),"% confidence"]})]})]})]})},f))})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Campaign Performance"})}),e.jsx("div",{className:"p-6",children:e.jsx(W,{campaigns:l.campaigns,loading:s})})]}),e.jsx(V,{})]}),c==="expert"&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"p-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(k,{size:20}),"Generate Performance Report"]}),e.jsxs("button",{className:"p-4 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(w,{size:20}),"Optimize Campaigns"]}),e.jsxs("button",{className:"p-4 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(q,{size:20}),"Schedule Review"]})]})]})};export{Z as default};
